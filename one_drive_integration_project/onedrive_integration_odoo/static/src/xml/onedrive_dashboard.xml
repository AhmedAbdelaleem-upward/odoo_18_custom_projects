<?xml version="1.0" encoding="UTF-8" ?>
<!-- Dashboard template -->
<template id="onedrive">
    <t t-name="OnedriveDashboard">
        <section class="dashboard_main_section" id="main_section_manager">
            <!-- OneDrive logo -->
            <img src="/onedrive_integration_odoo/static/src/img/microsoft-onedrive.svg"
                 style="width:100px; margin-left: 10px;"/>
            <img src="/onedrive_integration_odoo/static/src/img/onedrive_name.svg"
                 style="width:150px; margin-left: 15px;"/>
            <!-- Import button -->
            <input class="btn import" type="button" value="Import"
                   id="import" t-on-click="synchronize" />
            <!-- Upload button -->
            <input class="btn upload" type="button" value="Upload"
                   id="upload" t-on-click="upload"/>
            <div class="row">
                <div class="left-sidebar">
                    <div class="files">
                        <!-- File type: all files -->
                        <div class="file-type" value="allfiles" t-on-click="filter_file_type">
                            <img class="file-icon"
                                 src="/onedrive_integration_odoo/static/src/img/file.png"/>
                        </div>
                        <!-- File type: image -->
                        <div class="file-type" value="image" t-on-click="filter_file_type">
                            <img class="file-icon image"
                                 src="/onedrive_integration_odoo/static/src/img/image.png"/>
                        </div>
                        <!-- File type: MDB -->
                        <div class="file-type" value="mdb" t-on-click="filter_file_type">
                            <img class="file-icon"
                                src="/onedrive_integration_odoo/static/src/img/mdb2.png"/>
                        </div>
                        <!-- File type: PDF -->
                        <div class="file-type" value="pdf" t-on-click="filter_file_type">
                            <img class="file-icon"
                                 src="/onedrive_integration_odoo/static/src/img/pdf.png"/>
                        </div>
                        <!-- File type: Excel -->
                        <div class="file-type" value="xlsx" t-on-click="filter_file_type">
                            <img class="file-icon"
                                 src="/onedrive_integration_odoo/static/src/img/excel.png"/>
                        </div>
                        <!-- File type: Text -->
                        <!-- <div class="file-type" value="txt" t-on-click="filter_file_type">
                            <img class="file-icon"
                                 src="/onedrive_integration_odoo/static/src/img/txt.png"/>
                        </div> -->
                        <!-- File type: ZIP -->
                        <!-- <div class="file-type" value="zip" t-on-click="filter_file_type">
                            <img class="file-icon"
                                 src="/onedrive_integration_odoo/static/src/img/zip.png"/>
                        </div> -->
                    </div>
                </div>
                <!-- Content area to display OneDrive files -->
                <div class="col row content"
                     style="overflow-y: scroll; height: 80vh;
                     background-color:lightgray;"
                     id="onedrive_files" t-ref="all_files">
                                        
                    <t t-foreach="state.files" t-as="file" t-key="file.name">
                        <div class="col-sm-3 mb-4">
                            <div class="onedrive-card" t-att-data-ext="file.name.split('.').pop().toLowerCase()">

                                <!-- FILE ICON -->
                                <img class="onedrive-card-icon"
                                    t-att-src="file.icon"
                                    t-att-alt="file.name"/>

                                <!-- FILE NAME -->
                                <div class="onedrive-card-name" title="file.name">
                                    <t t-esc="file.name"/>
                                </div>

                                <!-- ACTION BUTTONS -->
                                <div class="onedrive-card-actions">
                                    <button class="btn btn-sm btn-primary"
                                            t-on-click="() => downloadFile(file)">
                                        Download
                                    </button>

                                    <t t-if="file.is_mdb">
                                        <button class="btn btn-sm btn-secondary"
                                                t-on-click="() => readMDB(file)">
                                            Read MDB
                                        </button>
                                    </t>
                                </div>

                            </div>
                        </div>
                    </t>


                </div>
            </div>
        </section>
    </t>
</template>
